!function(e){var t={};function n(i){if(t[i])return t[i].exports;var r=t[i]={i:i,l:!1,exports:{}};return e[i].call(r.exports,r,r.exports,n),r.l=!0,r.exports}n.m=e,n.c=t,n.d=function(e,t,i){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)n.d(i,r,function(t){return e[t]}.bind(null,r));return i},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="/bundles/administration/",n(n.s="bbkQ")}({"/y7s":function(e,t){function n(e,t,n,i,r,a,o){try{var c=e[a](o),s=c.value}catch(e){return void n(e)}c.done?t(s):Promise.resolve(s).then(i,r)}function i(e){return function(){var t=this,i=arguments;return new Promise((function(r,a){var o=e.apply(t,i);function c(e){n(o,r,a,c,s,"next",e)}function s(e){n(o,r,a,c,s,"throw",e)}c(void 0)}))}}var r=Shopware,a=r.Component,o=r.Context,c=Shopware.Data.Criteria;a.extend("eccb-tree-node-create","eccb-tree-node-detail",{inject:["repositoryFactory"],data:function(){return{treeNodeItemSetId:null}},computed:{itemRepository:function(){return this.repositoryFactory.create("eccb_item")},treeNodeItemSetRepository:function(){return this.repositoryFactory.create("eccb_tree_node_item_set")},parentRoute:function(){return this.$route.query.parentId?{name:"eccb.plugin.tree-node.detail",params:{id:this.$route.query.parentId}}:(this.$route.query.stepSetId,{name:"eccb.plugin.detail",params:{id:this.$route.query.stepSetId}})}},methods:{createdComponent:function(){Shopware.Context.api.languageId!==Shopware.Context.api.systemLanguageId&&Shopware.State.commit("context/setApiLanguageId",Shopware.Context.api.languageId),this.stepSet||Shopware.State.getters["context/isSystemDefaultLanguage"]||Shopware.State.commit("context/resetLanguageToDefault"),this.$route.query.treeNodeItemSetId&&(this.treeNodeItemSetId=this.$route.query.treeNodeItemSetId),this.getEntities(),this.isLoading=!1},getEntities:function(){var e=this;return i(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e.treeNode=e.treeNodeRepository.create(o.api),e.$route.query.stepSetId&&(e.treeNode.stepSetId=e.$route.query.stepSetId),e.$route.query.parentId&&!e.treeNodeItemSetId&&(e.treeNode.parentId=e.$route.query.parentId),n=e.itemRepository.create(o.api),e.treeNode.parentId?n.type="card":n.type="step",n.active=!0,e.treeNode.item=n,e.itemCard=e.itemCardRepository.create(o.api),e.itemCardRepository.search(e.itemCardListCriteria,o.api).then((function(t){e.itemCardList=t})),!e.treeNodeItemSetId){t.next=13;break}return t.next=12,e.treeNodeItemSetRepository.get(e.treeNodeItemSetId,o.api,new c);case 12:e.treeNodeItemSet=t.sent;case 13:setTimeout((function(){document.getElementById("sw-field--treeNode-stepDescription").focus()}),100);case 14:case"end":return t.stop()}}),t)})))()},onSave:function(){var e=this;return i(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e.validate()){t.next=2;break}return t.abrupt("return");case 2:if(t.prev=2,"card"!==e.treeNode.item.type){t.next=8;break}return e.treeNode.item.itemCardId=e.itemCard.id,t.next=8,e.itemCardRepository.save(e.itemCard,o.api);case 8:return e.treeNodeItemSetId&&(e.treeNode.treeNodeItemSetId=e.treeNodeItemSetId),t.next=11,e.treeNodeRepository.save(e.treeNode,o.api);case 11:e.isLoading=!1,e.$router.push({name:"eccb.plugin.tree-node.detail",params:{id:e.treeNode.id}}),e.createNotificationSuccess({title:e.$tc("eccbb.save-success.title"),message:e.$tc("ecc.save-success.text")}),t.next=19;break;case 16:t.prev=16,t.t0=t.catch(2),e.createNotificationError({title:e.$tc("eccb.error"),message:t.t0});case 19:case"end":return t.stop()}}),t,null,[[2,16]])})))()}}})},"0ARt":function(e,t){e.exports='{% block eccb_item_set_list %}\n    <sw-card :large="false" v-if="!treeNode._isNew">\n        <template #title>\n            <h2>\n                {{ $tc(\'eccb.node.itemSets\') }}\n            </h2>\n        </template>\n\n        <template #toolbar>\n            <div class="group">\n                <sw-button\n                        v-if="!treeNode._isNew"\n                        variant="primary"\n                        :routerLink="{name: \'eccb.plugin.item-set.create\', query: { treeNodeId: treeNode.id}}"\n                        style="margin-right: 2em"\n                >\n                    {{ $tc(\'eccb.node.addItemSet\') }}\n                </sw-button>\n\n                <sw-multi-select\n                        v-if="itemSetOptions && itemSetSelectedValues"\n                        :label="$tc(\'eccb.node.selectItemSets\')"\n\n                        :options="itemSetOptions"\n                        :value="itemSetSelectedValues"\n\n                        :isLoading="selectionLoading"\n                        valueProperty="id"\n                        labelProperty="internalName"\n                        @item-add="onItemSetAdd"\n                        @item-remove="onItemSetRemove"\n                        @search-term-change="search"\n                        @select-expanded="search"\n                >\n                </sw-multi-select>\n            </div>\n\n        </template>\n\n        <template #grid>\n            <eccb-data-grid\n                    v-if="joinedTreeNodeItemSetValues"\n                    ref="grid"\n                    :dataSource="joinedTreeNodeItemSetValues"\n                    :columns="columns"\n                    :allowInlineEdit="true"\n                    :showSelection="false"\n                    :naturalSorting="true"\n                    :isLoading="selectionLoading"\n                    @is-inline-edit="setInlineEdit"\n                    @inline-edit-save="onInlineEdit"\n                    @inline-edit-cancel="cancelInlineEdit"\n            >\n                <template #actions="{ item }">\n                    <sw-context-menu-item variant="danger" @click="onItemSetRemoveFromGrid(item)">\n                        {{ $tc(\'eccb.button.remove\') }}\n                    </sw-context-menu-item>\n                </template>\n\n                <template #column-itemSet.internalName="{item, column}">\n                    <template v-if="getInlineEdit(item) && column.hasOwnProperty(\'inlineEdit\')">\n                        <sw-data-grid-inline-edit\n                                v-if="item.itemSet"\n                                :column="column"\n                                :compact="true"\n                                :value="item.itemSet.internalName"\n                                @input="item.itemSet.internalName = $event">\n                        </sw-data-grid-inline-edit>\n                    </template>\n                    <template v-else>\n                        <router-link\n                                :to="{ name: column.routerLink, params: { id: item.itemSetId }, query: {treeNodeId: treeNode.id}}">\n                            {{ item.itemSet.internalName }}\n                        </router-link>\n                    </template>\n                </template>\n\n                <template #column-childNode.stepDescription="{item, column}">\n                    <template v-if="!item.childNode">\n                        <router-link\n                                :to="{name:\'eccb.plugin.tree-node.create\', query: { treeNodeItemSetId: item.id, stepSetId: treeNode.stepSetId, parentId: treeNode.id }}">\n                            <sw-icon name="default-basic-plus-circle" color="#ED1C24" size="12px"></sw-icon>\n                            <span style="margin-left: 0.5em">\n                                 {{ $tc(\'eccb.button.addNextStep\') }}\n                            </span>\n                        </router-link>\n                    </template>\n                    <template v-else>\n                        <template v-if="getInlineEdit(item) && column.hasOwnProperty(\'inlineEdit\')">\n                            <sw-data-grid-inline-edit\n                                    v-if="item.childNode"\n                                    :column="column"\n                                    :compact="true"\n                                    :value="item.childNode.stepDescription"\n                                    @input="item.childNode.stepDescription = $event">\n                            </sw-data-grid-inline-edit>\n                        </template>\n                        <router-link\n                                v-else\n                                :to="{name:\'eccb.plugin.tree-node.detail\', params: { id: item.childNode.id}, query: {treeNodeItemSetId: item.id}}">\n                            {{ item.childNode.stepDescription }}\n                        </router-link>\n                    </template>\n                </template>\n\n                <template #column-childNode.item.position="{item, column}">\n                    <template v-if="!item.childNode">\n                        --\n                    </template>\n                    <template v-else-if="item.childNode.item">\n                        <sw-data-grid-inline-edit\n                                v-if="getInlineEdit(item) && column.hasOwnProperty(\'inlineEdit\')"\n                                :column="column"\n                                :compact="true"\n                                :value="item.childNode.item[\'position\']"\n                                @input="item.childNode.item[\'position\'] = $event">\n                        </sw-data-grid-inline-edit>\n                    </template>\n                    <template v-else>\n                        {{ item.childNode.item[\'position\'] }}\n                    </template>\n                </template>\n\n                <template #column-childNode.item.active="{item, column}">\n                    <template v-if="!item.childNode">\n                        --\n                    </template>\n                    <template v-else-if="item.childNode.item">\n                        <sw-data-grid-column-boolean\n                                v-if="item.childNode.item"\n                                :column="column"\n                                :compact="true"\n                                :value="item.childNode.item[\'active\']"\n                                @input="item.childNode.item[\'active\'] = $event"\n                                :isInlineEdit="getInlineEdit(item) && column.hasOwnProperty(\'inlineEdit\')">\n                        </sw-data-grid-column-boolean>\n                    </template>\n                    <template v-else>\n                        {{ item.childNode.item[\'active\'] }}\n                    </template>\n                </template>\n\n            </eccb-data-grid>\n        </template>\n\n    </sw-card>\n{% endblock %}'},"0vAU":function(e){e.exports=JSON.parse('{"eccb":{"settings":"Settings","general":{"mainMenuItemGeneral":"CandyBags","mainMenuItemSet":"Item Set List","descriptionTextModule":"Manage Candy Bags"},"column":{"name":"Name","description":"Description","position":"Position","active":"Active","stepDescription":"Headline","purchasable":"Purchasable","terminal":"Terminal","itemSet":"Item Set","sequence":{"stepDescription":"Step Headline"}},"field":{"name":"Name","description":"Product Data","image":"Image","active":"Active","purchasable":"Purchasable","terminal":"Terminal","stepDescription":"Headline","type":"Item Type","internalName":"Internal Name","keywords":"SEO: Keywords","keywordsPlaceholder":"comma, separated, keywords (max: 1024 characters)","revisitAfter":"SEO: revisit after N days"},"node":{"items":"Items","itemSets":"Item Sets","addChild":"Add Child Item","addItemSet":"Create new Item Set","selectItemSets":"Select Item Sets"},"button":{"save":"Save","edit":"Edit","remove":"Remove","addNextStep":"Add Next Step"},"sequence":{"list-title":"Sequence List","detail-title":"Sequence Details","addSequence":"Add Sequence","steps":"Steps","addStep":"Add Step","basePrice":"Base Price","baseImage":"Selection Base Image"},"itemCard":{"newCard":"Create New Card","selectCard":"Select Existing Card","internalName":"Internal Name","product":"Product","addProduct":"Add a Product","showPrice":"Show Price","assignedToNodes":"This card is assigned to multiple nodes"},"itemSet":{"list-title":"Item Set List","addItemSet":"New Item Set","detail-title":"Item Set","internalName":"Internal Name","items":"Items","addItem":"Add Item","goToList":"All Item Sets ","assignedToNodes":"This ItemSet is assigned to following nodes:"},"error":"Something went wrong...","save-success":{"title":"","text":"Entity saved successfully!"}}}')},"1m6A":function(e,t,n){var i=n("w4qu");"string"==typeof i&&(i=[[e.i,i,""]]),i.locals&&(e.exports=i.locals);(0,n("SZ7m").default)("43ec12bf",i,!0,{})},"29Qd":function(e){e.exports=JSON.parse('{"eccb":{"settings":"Settings","general":{"mainMenuItemGeneral":"CandyBags","mainMenuItemSet":"Item Set List","descriptionTextModule":"Manage Candy Bags"},"column":{"name":"Name","description":"Description","position":"Position","active":"Active","stepDescription":"Headline","purchasable":"Purchasable","terminal":"Terminal","itemSet":"Item Set","sequence":{"stepDescription":"Step Headline"}},"field":{"name":"Name","description":"Product Data","image":"Image","active":"Active","purchasable":"Purchasable","terminal":"Terminal","stepDescription":"Headline","type":"Item Type","internalName":"Internal Name","keywords":"SEO: Keywords","keywordsPlaceholder":"comma, separated, keywords, (max: 1024 Zeichen)","revisitAfter":"SEO: revisit after N days"},"node":{"items":"Items","itemSets":"Item Sets","addChild":"Add Child Item","addItemSet":"Create new Item Set","selectItemSets":"Select Item Sets"},"button":{"save":"Save","edit":"Edit","remove":"Remove","addNextStep":"Add Next Step"},"sequence":{"list-title":"Sequence List","detail-title":"Sequence Details","addSequence":"Add Sequence","steps":"Steps","addStep":"Add Step","basePrice":"Base Price","baseImage":"Selection Base Image"},"itemCard":{"newCard":"Create New Card","selectCard":"Select Existing Card","internalName":"Internal Name","product":"Product","addProduct":"Add a Product","showPrice":"Show Price","assignedToNodes":"This card is assigned to multiple nodes"},"itemSet":{"list-title":"Item Set List","addItemSet":"New Item Set","detail-title":"Item Set","internalName":"Internal Name","items":"Items","addItem":"Add Item","goToList":"All Item Sets ","assignedToNodes":"This ItemSet is assigned to following nodes:"},"error":"Something went wrong...","save-success":{"title":"","text":"Entity saved successfully!"}}}')},"2itw":function(e,t){e.exports='{% block sw_desktop_content_view %}\n    <router-view\n            v-if="$route.name === \'eccb.plugin.tree-node.detail\'"\n            :key="$route.path"\n    ></router-view>\n    <template v-else>\n        {% parent %}\n    </template>\n{% endblock %}'},"5X1H":function(e,t){e.exports='{% block eccb_item_set_detail %}\n    <sw-page class="eccb-item-set-detail" ref="page">\n        <template #smart-bar-back>\n            <router-link v-if="itemSet && $refs.page"\n                         class="smart-bar__back-btn"\n                         :to="parentRoute"\n                         :style="{ \'color\': $refs.page.pageColor }">\n                <sw-icon name="default-arrow-head-left" small></sw-icon>\n                <sw-icon :name="$refs.page.module.icon" v-if="$refs.page.module && $refs.page.module.icon"\n                         small></sw-icon>\n            </router-link>\n        </template>\n\n        <template #smart-bar-header>\n            <h2 style="display: inline;" v-html="itemSet && itemSet.internalName ? itemSet.internalName : $tc(\'eccb.itemSet.detail-title\')"></h2>\n        </template>\n\n        <template #language-switch>\n            <sw-language-switch v-if="itemSet"\n                    {# :disabled="itemSet._isNew" #}\n                                :disabled="true"\n                                @on-change="changeLanguage">\n            </sw-language-switch>\n        </template>\n\n        {% block eccb_item_set_list_smart_bar_actions %}\n            <template #smart-bar-actions>\n                {% block eccb_item_set_detail_smart_bar_actions_save %}\n                    <sw-button variant="primary" @click="onSave" :isLoading="isLoading">\n                        {{ $tc(\'eccb.button.save\') }}\n                    </sw-button>\n                {% endblock %}\n\n                {% block eccb_item_set_detail_smart_bar_actions_cancel %}\n                    <sw-button :disabled="itemSet && itemSet.isLoading" @click="onClickListingButton">\n                        {{ $tc(\'eccb.itemSet.goToList\') }}\n                    </sw-button>\n                {% endblock %}\n            </template>\n        {% endblock %}\n\n        <template #content>\n            <sw-card-view v-if="itemSet" :large="false">\n                <sw-card :large="false">\n                    <sw-text-field\n                            ref="internalName"\n                            v-if="itemSet"\n                            :label="$tc(\'eccb.itemSet.internalName\')"\n                            v-model="itemSet.internalName">\n                    </sw-text-field>\n\n                    <template v-if="itemSet && itemSet.treeNodes.length">\n                        <p style="margin-bottom: 1em;">\n                            <strong>{{ $tc(\'eccb.itemSet.assignedToNodes\') }}</strong>\n                        </p>\n                        <router-link v-for="item in itemSet.treeNodes"\n                                     class="eccb-product-link"\n                                     :to="{ name: \'eccb.plugin.tree-node.detail\', params: { id: item.id } }"\n                                     :style="{ \'color\': \'#00A1FF\', \'display\': \'block\' }">\n                            <sw-icon name="default-web-link" small></sw-icon>&nbsp;\n                            {{ item.stepDescription ? item.stepDescription + \' - \' + item.id : item.id }}\n                        </router-link>\n                        <br>\n                    </template>\n                </sw-card>\n\n\n\n                <sw-card :large="false" v-if="!itemSet._isNew">\n                    <template #title>\n                        <h2>\n                            {{ $tc(\'eccb.itemSet.items\') }}\n                        </h2>\n                    </template>\n                    <template #toolbar>\n                        <sw-button\n                                variant="primary"\n                                :routerLink="{name: \'eccb.plugin.item-set.item.create\', query: { itemSetId: itemSet.id}}"\n                                style="margin-right: 2em"\n                        >\n                            {{ $tc(\'eccb.itemSet.addItem\') }}\n                        </sw-button>\n                    </template>\n\n                    <template #grid>\n                        <eccb-data-grid\n                                v-if="items && items.length > 0"\n                                ref="grid"\n                                :dataSource="items"\n                                :columns="columns"\n                                :allowInlineEdit="true"\n                                :showSelection="false"\n                                :naturalSorting="true"\n                                @inline-edit-save="onInlineEdit"\n                                :skeletonItemAmount="limit"\n                                {# @is-inline-edit="setInlineEdit" #}\n                                :isLoading="isLoading"\n                        >\n\n                            <template #actions="{ item }">\n                                <sw-context-menu-item variant="danger" @click="removeItem(item)">\n                                    Remove\n                                </sw-context-menu-item>\n                            </template>\n\n                            <template #pagination>\n                                <sw-pagination\n                                        :total="total"\n                                        :limit="limit"\n                                        :page="page"\n                                        :steps="[5, 10, 25, 50]"\n                                        :autoHide="false"\n                                        @page-change="onPageChange">\n                                </sw-pagination>\n                            </template>\n                        </eccb-data-grid>\n\n\n                    </template>\n\n                </sw-card>\n            </sw-card-view>\n        </template>\n    </sw-page>\n{% endblock %}'},"6EYD":function(e,t,n){},B5S8:function(e,t){var n=Shopware,i=n.Component;n.Context,n.Utils;i.extend("eccb-data-grid","sw-data-grid",{methods:{onDbClickCell:function(e){this.allowInlineEdit&&this.isRecordEditable(e)&&(this.$emit("is-inline-edit",!0,e[this.itemIdentifierProperty]),this.enableInlineEdit(),this.currentInlineEditId=e[this.itemIdentifierProperty])}}})},KaMi:function(e,t,n){},L1Ba:function(e,t){e.exports='{% block eccb_tree_node_detail %}\n    <sw-page class="eccb-tree-node-detail" ref="page">\n\n        <template #smart-bar-back>\n            <router-link v-if="treeNode && $refs.page"\n                         class="smart-bar__back-btn"\n                         :to="parentRoute"\n                         :style="{ \'color\': $refs.page.pageColor }">\n                <sw-icon name="default-arrow-head-left" small></sw-icon>\n                <sw-icon :name="$refs.page.module.icon" v-if="$refs.page.module && $refs.page.module.icon"\n                         small></sw-icon>\n            </router-link>\n        </template>\n\n        <template #smart-bar-header>\n            <span v-if="treeNode && treeNode.item && children">\n                <img v-if="!treeNode.item.active" class="eccb-header-icon"\n                     :src="\'eventcandycandybags/static/img/inactive.svg\' | asset">\n                <img v-else class="eccb-header-icon" :src="\'eventcandycandybags/static/img/state-2.svg\' | asset">\n            </span>\n            <h2 style="display: inline;" v-html="treeNode ? treeNode.stepDescription : \'\'"></h2>\n        </template>\n\n        <template #language-switch>\n            <sw-language-switch v-if="treeNode"\n                                :disabled="treeNode._isNew"\n                                @on-change="changeLanguage">\n            </sw-language-switch>\n        </template>\n\n        {% block eccb_tree_node_list_smart_bar_actions %}\n            <template #smart-bar-actions>\n                {% block eccb_tree_node_detail_smart_bar_actions_save %}\n                    <sw-button variant="primary" @click="onSave" :isLoading="isLoading">\n                        {{ $tc(\'eccb.button.save\') }}\n                    </sw-button>\n                {% endblock %}\n\n                {# {% block eccb_tree_node_detail_smart_bar_actions_cancel %} #}\n                {# <sw-button :disabled="treeNode && treeNode.isLoading" #}\n                {# @click="onClickCancel"> #}\n                {# {{ $tc(\'eccb.tree-node.detail.back\') }} #}\n                {# </sw-button> #}\n                {# {% endblock %} #}\n            </template>\n        {% endblock %}\n\n        <template #content>\n            <sw-card-view v-if="treeNode" :large="false">\n                <sw-card :large="false">\n\n                    <sw-text-field\n                            :label="$tc(\'eccb.field.stepDescription\')"\n                            v-model="treeNode.stepDescription">\n                    </sw-text-field>\n\n\n                    <sw-select-field\n                            :disabled="!treeNode.parentId"\n                            v-model="treeNode.item.type"\n                            :label="$tc(\'eccb.field.type\')">\n                        <option value="card">Card</option>\n                        <option v-if="!treeNode.parentId" value="step">Step</option>\n                    </sw-select-field>\n\n\n                    <sw-checkbox-field\n                            style="display: inline-block; margin-right: 2em"\n                            :label="$tc(\'eccb.field.active\')"\n                            v-model="treeNode.item.active"></sw-checkbox-field>\n\n                    <sw-checkbox-field\n                            v-if="treeNode.item.type !== \'step\'"\n                            style="display: inline-block; margin-right: 2em"\n                            :label="$tc(\'eccb.field.purchasable\')"\n                            v-model="treeNode.item.purchasable"></sw-checkbox-field>\n\n                    <sw-checkbox-field\n                            v-if="treeNode.item.type !== \'step\'"\n                            style="display: inline-block; margin-right: 2em"\n                            :label="$tc(\'eccb.field.terminal\')"\n                            v-model="treeNode.item.terminal"></sw-checkbox-field>\n                </sw-card>\n\n\n                <sw-card v-if="treeNode.item.type == \'card\' && itemCard">\n\n                    <div class="group">\n                        <sw-button\n                                style="margin-right: 1em;"\n                                variant="primary"\n                                @click="createNewItemCard">\n                            {{ $tc(\'eccb.itemCard.newCard\') }}\n                        </sw-button>\n\n                        <sw-single-select\n                                style="display: inline-block; margin-right: 1em;"\n                                ref="select"\n                                v-if="itemCard && itemCardList && itemCardList.length"\n                                :options="itemCardOptions"\n                                labelValue="label"\n                                valueProperty="value"\n                                :placeholder="\'Select a card...\'"\n                                :label="$tc(\'eccb.itemCard.selectCard\')"\n                                :value="treeNode.item.itemCardId"\n                                @change="changeCard"\n                                @search="searchCard"\n                                required\n                        >\n\n                            <template\n                                    #result-item="{ item, index, labelProperty, searchTerm, highlightSearchTerm, isSelected, setValue, getKey }">\n                                <li is="sw-select-result"\n                                    :class="\'sw-select-option--\' + item.value + \' eccb-tree-node-item-card-select\'"\n                                    :selected="isSelected(item)"\n                                    @item-select="setValue"\n                                    v-bind="{ item, index }">\n                                    <slot name="result-label-property"\n                                          v-bind="{ item, index, labelProperty, searchTerm, highlightSearchTerm, getKey }">\n                                        <sw-highlight-text\n                                                v-if="highlightSearchTerm"\n                                                :text="getKey(item, labelProperty)"\n                                                :searchTerm="searchTerm">\n                                        </sw-highlight-text>\n                                        <template v-else>\n                                            {{ getKey(item, labelProperty) }}\n                                        </template>\n                                        <sw-icon\n                                                @click.stop="deleteItemCard(item)"\n                                                size="12px"\n                                                name="small-trash"\n                                                :color="$refs.page.pageColor">\n                                        </sw-icon>\n                                    </slot>\n                                </li>\n                            </template>\n                        </sw-single-select>\n\n\n                        <sw-text-field\n                                v-if="itemCard"\n                                style="display: inline-block;"\n                                :label="$tc(\'eccb.itemCard.internalName\')"\n                                v-model="itemCard.internalName">\n                        </sw-text-field>\n\n                    </div>\n\n                    <template v-if="itemCard && itemCard.items.length > 1">\n                        <strong>{{ $tc(\'eccb.itemCard.assignedToNodes\') }}</strong>\n                        <router-link v-for="item in itemCard.items"\n                                     class="eccb-product-link"\n                                     :to="{ name: \'eccb.plugin.tree-node.detail\', params: { id: item.treeNodeId } }"\n                                     :style="{ \'color\': \'#00A1FF\', \'display\': \'block\' }">\n                            <sw-icon name="default-web-link" small></sw-icon>&nbsp;\n                            {{ item.treeNodeId }}\n                        </router-link>\n                        <br>\n                    </template>\n\n                    <sw-text-field\n                            v-if="itemCard"\n                            :label="$tc(\'eccb.field.name\')"\n                            v-model="itemCard.name">\n                    </sw-text-field>\n\n                    <sw-text-editor\n                            v-if="itemCard"\n                            :label="$tc(\'eccb.field.description\')"\n                            v-model="itemCard.description">\n                    </sw-text-editor>\n\n                    <eccb-media-field\n                            v-if="itemCard"\n                            :label="$tc(\'eccb.field.image\')"\n                            v-model="itemCard.mediaId"\n                            :showUploadField="false"\n                            :showControls="false"\n                            @eccb-media-id-change="onChangeMedia"\n                            :mediaFolderName="\'Candy Bags\'"\n                    >\n                    </eccb-media-field>\n\n                    <sw-checkbox-field\n                            v-if="itemCard"\n                            style="display: inline-block; margin-right: 2em"\n                            :label="$tc(\'eccb.itemCard.showPrice\')"\n                            v-model="itemCard.showPrice"></sw-checkbox-field>\n\n                        <router-link v-if="itemCard.product"\n                                     class="eccb-product-link"\n                                     :to="{ name: \'sw.product.detail\', params: { id: itemCard.product.id } }"\n                                     :style="{ \'color\': \'#00A1FF\' }">\n                            <sw-icon name="default-web-link" small></sw-icon>&nbsp;\n                            {{ itemCard.product.name }}\n                        </router-link>\n\n\n                    <sw-single-select\n                            v-if="products.length"\n                            :options="productOptions"\n                            labelValue="label"\n                            valueProperty="value"\n                            :placeholder="$tc(\'eccb.itemCard.addProduct\')"\n                            :label="$tc(\'eccb.itemCard.product\')"\n                            :value="itemCard.productId"\n                            @change="changeProduct"\n                            @select-expanded="getProductList"\n                            @search="searchProduct"\n                            required\n                    >\n                    </sw-single-select>\n\n\n                </sw-card>\n\n\n                {# Child Grid #}\n                <sw-card :large="false" v-if="!treeNode._isNew">\n                    <template #title>\n                        <h2 style="display: inline;">\n                            {{ $tc(\'eccb.node.items\') }}\n                        </h2>\n                        (#deprecated)\n                    </template>\n\n                    <template #toolbar>\n                        <sw-button\n                                :disabled="true"\n                                v-if="!treeNode._isNew"\n                                variant="primary"\n                                :routerLink="createChildRoute"\n                        >\n                            {{ $tc(\'eccb.node.addChild\') }}\n                        </sw-button>\n                    </template>\n\n                    <template #grid>\n                        <eccb-data-grid\n                                v-if="children"\n                                ref="treeNodeGrid"\n                                :dataSource="children"\n                                :columns="childColumns"\n                                :allowInlineEdit="true"\n                                :showSelection="false"\n                                :naturalSorting="true"\n                                :isLoading="isLoading"\n                                :skeletonItemAmount="limit"\n                                @is-inline-edit="setInlineEdit"\n                                @inline-edit-save="onInlineEdit"\n                        >\n                            <template #actions="{ item }">\n                                <sw-context-menu-item variant="danger" @click="deleteTreeNode(item)">\n                                    {{ $tc(\'eccb.button.remove\') }}\n                                </sw-context-menu-item>\n                            </template>\n\n\n                            <template #column-item.position="{item, column}">\n                                <template v-if="item.item">\n                                    <sw-data-grid-inline-edit\n                                            v-if="getInlineEdit(item) && column.hasOwnProperty(\'inlineEdit\')"\n                                            :column="column"\n                                            :compact="true"\n                                            :value="item.item[\'position\']"\n                                            @input="item.item[\'position\'] = $event">\n                                    </sw-data-grid-inline-edit>\n                                </template>\n                            </template>\n\n                            <template #column-item.active="{item, column}">\n                                <template v-if="item.item">\n                                    <sw-data-grid-column-boolean\n                                            v-if="item.item"\n                                            :column="column"\n                                            :compact="true"\n                                            :value="item.item[\'active\']"\n                                            @input="item.item[\'active\'] = $event"\n                                            :isInlineEdit="getInlineEdit(item) && column.hasOwnProperty(\'inlineEdit\')">\n                                    </sw-data-grid-column-boolean>\n                                </template>\n                            </template>\n\n                            <template #column-item.purchasable="{item, column}">\n                                <template v-if="item.item">\n                                    <sw-data-grid-column-boolean\n                                            v-if="item.item"\n                                            :column="column"\n                                            :compact="true"\n                                            :value="item.item[\'purchasable\']"\n                                            @input="item.item[\'purchasable\'] = $event"\n                                            :isInlineEdit="getInlineEdit(item) && column.hasOwnProperty(\'inlineEdit\')">\n                                    </sw-data-grid-column-boolean>\n                                </template>\n                            </template>\n\n                            <template #column-item.terminal="{item, column}">\n                                <template v-if="item.item">\n                                    <sw-data-grid-column-boolean\n                                            v-if="item.item"\n                                            :column="column"\n                                            :compact="true"\n                                            :value="item.item[\'terminal\']"\n                                            @input="item.item[\'terminal\'] = $event"\n                                            :isInlineEdit="getInlineEdit(item) && column.hasOwnProperty(\'inlineEdit\')">\n                                    </sw-data-grid-column-boolean>\n                                </template>\n                            </template>\n\n                            <template #pagination>\n                                <sw-pagination\n                                        v-if="children.length > 0"\n                                        :total="total"\n                                        :limit="limit"\n                                        :page="page"\n                                        :steps="[5, 10, 25, 50]"\n                                        :autoHide="false"\n                                        @page-change="onPageChange">\n                                </sw-pagination>\n                            </template>\n\n                        </eccb-data-grid>\n\n\n                    </template>\n                </sw-card>\n\n                <eccb-item-set-list-component\n                        :treeNode="treeNode">\n                </eccb-item-set-list-component>\n            </sw-card-view>\n            <sw-loader v-else size="50px">\n                --\n            </sw-loader>\n        </template>\n\n        <template #sidebar>\n            <sw-sidebar>\n                <sw-sidebar-item ref="sidebar" :title="$tc(\'eccb.field.image\')" icon="default-object-image">\n                    <div class="image-container">\n                        <img v-if="itemCard && itemCard.media && itemCard.media.url && treeNode.item.type === \'card\'"\n                             class="image"\n                             :src="itemCard.media.url"/>\n                    </div>\n                </sw-sidebar-item>\n            </sw-sidebar>\n        </template>\n    </sw-page>\n\n{% endblock %}'},PIJb:function(e,t,n){var i=n("n4Ua");"string"==typeof i&&(i=[[e.i,i,""]]),i.locals&&(e.exports=i.locals);(0,n("SZ7m").default)("6859711c",i,!0,{})},RUJY:function(e,t){e.exports='{% block sw_admin_menu_item_icon %}\n    <template v-if="isEventCandyCandyBagsPath(entry.path)">\n\t\t    <span class="sw-admin-menu__navigation-link-icon sw-icon">\n                <svg xmlns="http://www.w3.org/2000/svg" width="699.23" height="699.23" viewBox="0 0 699.23 699.23"><path d="M109,84.57H265.86c13.93,0,25.22-11.69,25.22-26.1V28.63C291.08,13.92,279.56,2,265.35,2L75.47,3C41.31,3,2,30.57,2,94.39l.9,207.13L2,508.65C2,572.46,41.31,602,75.47,602l189.88,1c14.21,0,25.73-11.93,25.73-26.63V544.57c0-14.42-11.29-26.1-25.22-26.1H109c-16.43,0-29.75-13.79-29.75-30.79V115.35C79.27,98.35,92.59,84.57,109,84.57Z" fill="#ed1c24" fill-rule="evenodd"/><path d="M698,195.59c0-68.68-39.59-89.58-98.79-89.58L422,105.15c-20.74-.09-37.6,18.63-37.6,41.77v21.76h.09l-1.85,473.74c0,58.88,20.64,53.75,58.26,55.73L602,699.23c64.87,0,96-36.69,96-105.37l-.9-197.55ZM626.34,555.86c0,36.94-13.56,79.76-80.36,79.76H474.61c-12.6,0-22.81-11.39-22.81-25.45V460.72c0-16,11.65-29,26-29h61.25c87.27-6.23,87.27,63.87,87.27,87.21Zm0-268.38c0,54.95-12.52,87.15-74.1,87.15H468.37c-9.15,0-16.57-8.28-16.57-18.49V190.61c0-12.11,8.8-21.93,19.67-21.93h78.68c61.58,0,76.19,46,76.19,77.51Z" fill="#ed1c24" fill-rule="evenodd"/></svg>\n            </span>\n    </template>\n\n    <template v-else>\n        {% parent %}\n    </template>\n{% endblock %}\n'},RghW:function(e,t,n){var i=n("KaMi");"string"==typeof i&&(i=[[e.i,i,""]]),i.locals&&(e.exports=i.locals);(0,n("SZ7m").default)("8cc42724",i,!0,{})},SZ7m:function(e,t,n){"use strict";function i(e,t){for(var n=[],i={},r=0;r<t.length;r++){var a=t[r],o=a[0],c={id:e+":"+r,css:a[1],media:a[2],sourceMap:a[3]};i[o]?i[o].parts.push(c):n.push(i[o]={id:o,parts:[c]})}return n}n.r(t),n.d(t,"default",(function(){return h}));var r="undefined"!=typeof document;if("undefined"!=typeof DEBUG&&DEBUG&&!r)throw new Error("vue-style-loader cannot be used in a non-browser environment. Use { target: 'node' } in your Webpack config to indicate a server-rendering environment.");var a={},o=r&&(document.head||document.getElementsByTagName("head")[0]),c=null,s=0,d=!1,l=function(){},m=null,u="data-vue-ssr-id",p="undefined"!=typeof navigator&&/msie [6-9]\b/.test(navigator.userAgent.toLowerCase());function h(e,t,n,r){d=n,m=r||{};var o=i(e,t);return f(o),function(t){for(var n=[],r=0;r<o.length;r++){var c=o[r];(s=a[c.id]).refs--,n.push(s)}t?f(o=i(e,t)):o=[];for(r=0;r<n.length;r++){var s;if(0===(s=n[r]).refs){for(var d=0;d<s.parts.length;d++)s.parts[d]();delete a[s.id]}}}}function f(e){for(var t=0;t<e.length;t++){var n=e[t],i=a[n.id];if(i){i.refs++;for(var r=0;r<i.parts.length;r++)i.parts[r](n.parts[r]);for(;r<n.parts.length;r++)i.parts.push(b(n.parts[r]));i.parts.length>n.parts.length&&(i.parts.length=n.parts.length)}else{var o=[];for(r=0;r<n.parts.length;r++)o.push(b(n.parts[r]));a[n.id]={id:n.id,refs:1,parts:o}}}}function g(){var e=document.createElement("style");return e.type="text/css",o.appendChild(e),e}function b(e){var t,n,i=document.querySelector("style["+u+'~="'+e.id+'"]');if(i){if(d)return l;i.parentNode.removeChild(i)}if(p){var r=s++;i=c||(c=g()),t=S.bind(null,i,r,!1),n=S.bind(null,i,r,!0)}else i=g(),t=y.bind(null,i),n=function(){i.parentNode.removeChild(i)};return t(e),function(i){if(i){if(i.css===e.css&&i.media===e.media&&i.sourceMap===e.sourceMap)return;t(e=i)}else n()}}var v,w=(v=[],function(e,t){return v[e]=t,v.filter(Boolean).join("\n")});function S(e,t,n,i){var r=n?"":i.css;if(e.styleSheet)e.styleSheet.cssText=w(t,r);else{var a=document.createTextNode(r),o=e.childNodes;o[t]&&e.removeChild(o[t]),o.length?e.insertBefore(a,o[t]):e.appendChild(a)}}function y(e,t){var n=t.css,i=t.media,r=t.sourceMap;if(i&&e.setAttribute("media",i),m.ssrId&&e.setAttribute(u,t.id),r&&(n+="\n/*# sourceURL="+r.sources[0]+" */",n+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(r))))+" */"),e.styleSheet)e.styleSheet.cssText=n;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(n))}}},UWul:function(e,t){function n(e,t,n,i,r,a,o){try{var c=e[a](o),s=c.value}catch(e){return void n(e)}c.done?t(s):Promise.resolve(s).then(i,r)}var i=Shopware,r=i.Component,a=i.Context;r.extend("eccb-item-set-create","eccb-item-set-detail",{methods:{createdComponent:function(){Shopware.Context.api.languageId!==Shopware.Context.api.systemLanguageId&&Shopware.State.commit("context/setApiLanguageId",Shopware.Context.api.languageId),this.stepSet||Shopware.State.getters["context/isSystemDefaultLanguage"]||Shopware.State.commit("context/resetLanguageToDefault"),this.getItemSet()},getItemSet:function(){this.itemSet=this.itemSetRepository.create(a.api),this.isLoading=!1,setTimeout((function(){document.getElementById("sw-field--itemSet-internalName").focus()}),100)},onSave:function(){var e,t=this;return(e=regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.validate()){e.next=2;break}return e.abrupt("return");case 2:return t.isLoading=!0,e.prev=3,e.next=6,t.itemSetRepository.save(t.itemSet,a.api);case 6:t.createNotificationSuccess({title:t.$tc("eccb.save-success.title"),message:t.$tc("eccb.save-success.text")}),t.$router.push({name:"eccb.plugin.item-set.detail",params:{id:t.itemSet.id},query:{treeNodeId:t.$route.query.treeNodeId}}),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(3),t.isLoading=!1,t.createNotificationError({title:t.$tc("eccb.error"),message:t.createErrorMessage(e.t0)});case 14:case"end":return e.stop()}}),e,null,[[3,10]])})),function(){var t=this,i=arguments;return new Promise((function(r,a){var o=e.apply(t,i);function c(e){n(o,r,a,c,s,"next",e)}function s(e){n(o,r,a,c,s,"throw",e)}c(void 0)}))})()}}})},bbkQ:function(e,t,n){"use strict";n.r(t);n("B5S8");var i=n("29Qd"),r=n("0vAU"),a=n("lfM/"),o=n.n(a),c=Shopware,s=c.Component,d=c.Context,l=Shopware.Data.Criteria;s.register("eccb-step-set-list",{template:o.a,inject:["repositoryFactory"],shortcuts:{"SYSTEMKEY+N":"addSequence"},data:function(){return{stepSets:null,isLoading:!0,currentLanguageId:Shopware.Context.api.languageId}},created:function(){this.componentCreated()},computed:{stepSetRepository:function(){return this.repositoryFactory.create("eccb_step_set")},stepSetCriteria:function(){return new l},columns:function(){return[{property:"name",dataIndex:"name",label:"eccb.column.name",inlineEdit:"string",routerLink:"eccb.plugin.detail",primary:!0},{property:"position",label:"eccb.column.position",inlineEdit:"number"},{property:"active",label:"eccb.column.active",inlineEdit:"boolean"}]}},methods:{componentCreated:function(){this.getSetSteps()},changeLanguage:function(e){this.currentLanguageId=e,this.componentCreated()},getSetSteps:function(){var e=this;return this.isLoading=!0,this.stepSetRepository.search(this.stepSetCriteria,d.api).then((function(t){e.stepSets=t,e.isLoading=!1}))},addSequence:function(){this.$router.push({name:"eccb.plugin.create"})}}});n("yuZn");var m=n("zSds"),u=n.n(m);n("nEqv");function p(e,t,n,i,r,a,o){try{var c=e[a](o),s=c.value}catch(e){return void n(e)}c.done?t(s):Promise.resolve(s).then(i,r)}function h(e){return function(){var t=this,n=arguments;return new Promise((function(i,r){var a=e.apply(t,n);function o(e){p(a,i,r,o,c,"next",e)}function c(e){p(a,i,r,o,c,"throw",e)}o(void 0)}))}}var f=Shopware,g=f.Component,b=f.Mixin,v=f.Context,w=Shopware.Data.Criteria;g.register("eccb-step-set-detail",{template:u.a,mixins:[b.getByName("notification")],shortcuts:{"SYSTEMKEY+S":"onSave","SYSTEMKEY+B":"onClickCancel","SYSTEMKEY+N":"createTreeNode"},inject:["repositoryFactory"],metaInfo:function(){return{title:this.$createTitle()}},data:function(){return{stepSet:null,taxes:null,steps:null,isLoading:!0,mediaFolderName:"Candy Bags",currentLanguageId:v.api.languageId,inlineEdit:!1,currentInlineEditId:null,currencies:null}},created:function(){this.createdComponent()},mounted:function(){this.$refs.sidebar.openContent()},computed:{treeNodeColumns:function(){return[{property:"stepDescription",label:"eccb.column.sequence.stepDescription",inlineEdit:"string",routerLink:"eccb.plugin.tree-node.detail",primary:!0},{property:"item.position",label:"eccb.column.position",inlineEdit:"number"},{property:"item.active",label:"eccb.column.active",inlineEdit:"boolean"}]},stepSetRepository:function(){return this.repositoryFactory.create("eccb_step_set")},treeNodeRepository:function(){return this.repositoryFactory.create("eccb_tree_node")},itemRepository:function(){return this.repositoryFactory.create("eccb_item")},currencyRepository:function(){return this.repositoryFactory.create("currency")},taxRepository:function(){return this.repositoryFactory.create("tax")},treeNodeCriteria:function(){var e=new w;return e.addAssociation("item"),e.addFilter(w.equals("stepSetId",this.$route.params.id)),e},defaultCurrency:function(){if(!this.currencies)return{};var e=this.currencies.find((function(e){return e.isSystemDefault}));return e||{}}},methods:{createdComponent:function(){var e=this;return h(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.isLoading=!0,t.next=3,Promise.all([e.getStepSet(),e.getSteps()]);case 3:e.isLoading=!1;case 4:case"end":return t.stop()}}),t)})))()},loadCurrencies:function(){var e=this;return h(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",e.currencyRepository.search(new w(1,500),v.api).then((function(t){e.currencies=t})));case 1:case"end":return t.stop()}}),t)})))()},loadTaxes:function(){var e=this;return h(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",e.taxRepository.search(new w(1,500),v.api).then((function(t){e.taxes=t})));case 1:case"end":return t.stop()}}),t)})))()},getStepSet:function(){var e=this;return h(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return(n=new w).addAssociation("media"),n.addAssociation("selectionBaseImage"),t.next=5,e.stepSetRepository.get(e.$route.params.id,v.api,n);case 5:return e.stepSet=t.sent,t.next=8,e.loadTaxes();case 8:return t.next=10,e.loadCurrencies();case 10:null==e.stepSet.price&&(e.stepSet.price=[{currencyId:e.defaultCurrency.id,net:null,linked:!0,gross:null}]);case 11:case"end":return t.stop()}}),t)})))()},getSteps:function(){var e=this;return h(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return(n=new w).addFilter(w.equals("stepSetId",e.$route.params.id)),n.addFilter(w.equals("parentId",null)),n.addFilter(w.equals("treeNodeItemSetId",null)),n.addAssociation("item"),n.addSorting(w.sort("item.position","desc")),t.abrupt("return",e.treeNodeRepository.search(n,v.api).then((function(t){return e.steps=t,Promise.resolve()})));case 7:case"end":return t.stop()}}),t)})))()},onMediaSelect:function(){this.onSave()},validate:function(){var e=!0;return this.stepSet.name||(this.createNotificationError({message:"o_0.. Missing required Fields:<br>"+this.$tc("eccb.field.name")}),e=!1),e},onSave:function(){var e=this;return h(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e.validate()){t.next=2;break}return t.abrupt("return");case 2:return e.isLoading=!0,t.prev=3,t.next=6,e.stepSetRepository.save(e.stepSet,v.api);case 6:return t.next=8,e.createdComponent();case 8:t.next=13;break;case 10:t.prev=10,t.t0=t.catch(3),e.createNotificationError({title:e.$tc("eccb.error"),message:t.t0});case 13:case"end":return t.stop()}}),t,null,[[3,10]])})))()},changeLanguage:function(e){this.currentLanguageId=e,this.createdComponent()},onClickCancel:function(){this.$router.push({name:"eccb.plugin.index"})},onInlineEditTreeNodes:function(e){var t=this;return h(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,Promise.all([t.treeNodeRepository.save(e,v.api)]).then((function(){t.inlineEdit=!1,t.getSteps(),t.createNotificationSuccess({title:t.$tc("eccb.save-success.title"),message:t.$tc("eccb.save-success.text")})})).catch((function(e){t.createNotificationError({title:t.$tc("eccb.error"),message:e})}));case 2:case"end":return n.stop()}}),n)})))()},deleteTreeNode:function(e){var t=this;this.steps.remove(e.id),this.treeNodeRepository.delete(e.id,v.api).then((function(){t.createNotificationSuccess({title:t.$tc("eccb.save-success.title"),message:t.$tc("eccb.save-success.text")})})).catch((function(e){t.createNotificationError({title:t.$tc("eccb.error"),message:t.createErrorMessage(e)}),t.createdComponent()}))},editTreeNode:function(e){this.$router.push({name:"eccb.plugin.tree-node.detail",params:{id:e.id}})},setInlineEdit:function(e,t){this.inlineEdit=!0,this.currentInlineEditId=t},getInlineEdit:function(e){return this.inlineEdit&&this.currentInlineEditId===e.id},createTreeNode:function(){this.$router.push({name:"eccb.plugin.tree-node.create",query:{stepSetId:this.stepSet.id}})},createErrorMessage:function(e){var t="";return e.response.data.errors.forEach((function(e){t+="Error.. o_0: <br> ".concat(e.detail,"<br>")})),t},updateCurrentTaxRate:function(e){this.stepSet.taxId=e,this.onSave()}}});n("/y7s");var S=n("L1Ba"),y=n.n(S);n("PIJb");function C(e,t,n,i,r,a,o){try{var c=e[a](o),s=c.value}catch(e){return void n(e)}c.done?t(s):Promise.resolve(s).then(i,r)}function I(e){return function(){var t=this,n=arguments;return new Promise((function(i,r){var a=e.apply(t,n);function o(e){C(a,i,r,o,c,"next",e)}function c(e){C(a,i,r,o,c,"throw",e)}o(void 0)}))}}var N=Shopware,x=N.Component,k=N.Mixin,_=N.Context,E=Shopware.Data.Criteria;x.register("eccb-tree-node-detail",{template:y.a,mixins:[k.getByName("notification")],inject:["repositoryFactory"],shortcuts:{"SYSTEMKEY+S":"onSave","SYSTEMKEY+B":"onClickCancel","SYSTEMKEY+N":"addChildNode"},metaInfo:function(){return{title:this.$createTitle()}},data:function(){return{treeNode:null,isLoading:!0,itemCard:null,itemCardList:null,products:[],children:null,mediaFolderName:"Candy Bags",currentLanguageId:_.api.languageId,treeNodeItemSet:null,inlineEdit:!1,currentInlineEditId:null,page:1,limit:10,total:0}},created:function(){var e=this;return I(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.createdComponent();case 2:case"end":return t.stop()}}),t)})))()},mounted:function(){var e=this;return I(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if("eccb.plugin.tree-node.detail"===e.$route.name){t.next=2;break}return t.abrupt("return");case 2:return t.next=4,e.treeNodeRepository.get(e.$route.params.id,_.api,e.treeNodeCriteria);case 4:e.treeNode=t.sent,"card"===e.treeNode.item.type&&e.$refs.sidebar.openContent();case 6:case"end":return t.stop()}}),t)})))()},computed:{createChildRoute:function(){return{name:"eccb.plugin.tree-node.create",query:{stepSetId:this.treeNode.stepSetId,parentId:this.treeNode.id}}},parentRoute:function(){return this.treeNode.treeNodeItemSet&&this.treeNode.treeNodeItemSet.treeNodeId?{name:"eccb.plugin.tree-node.detail",params:{id:this.treeNode.treeNodeItemSet.treeNodeId}}:this.treeNode.parentId?{name:"eccb.plugin.tree-node.detail",params:{id:this.treeNode.parentId}}:{name:"eccb.plugin.detail",params:{id:this.treeNode.stepSetId}}},treeNodeRepository:function(){return this.repositoryFactory.create("eccb_tree_node")},treeNodeCriteria:function(){var e=new E;return e.addAssociation("item"),e},treeNodeChildrenCriteria:function(){var e=new E;return e.limit=this.limit,e.setPage(this.page),e.addAssociation("item"),e.addFilter(E.equals("parentId",this.$route.params.id)),e.addSorting(E.sort("item.position","desc")),e},itemCardRepository:function(){return this.repositoryFactory.create("eccb_item_card")},itemCardCriteria:function(){var e=new E;return e.addAssociation("media"),e.addAssociation("product"),e.addAssociation("items.treeNode"),e},itemCardListCriteria:function(){var e=new E;return e.addFilter(E.not("AND",[E.equals("internalName",null)])),e},itemCardOptions:function(){return this.itemCardList.map((function(e){return{value:e.id,label:e.internalName}}))},productRepository:function(){return this.repositoryFactory.create("product")},productOptions:function(){return this.products.map((function(e){return{value:e.id,label:e.name}}))},productCriteria:function(){return new E},childColumns:function(){return[{property:"stepDescription",label:"eccb.column.stepDescription",inlineEdit:"string",routerLink:"eccb.plugin.tree-node.detail",primary:!0},{property:"item.position",label:"eccb.column.position",inlineEdit:"number"},{property:"item.active",label:"eccb.column.active",inlineEdit:"boolean"},{property:"item.purchasable",label:"eccb.column.purchasable",inlineEdit:"boolean"},{property:"item.terminal",label:"eccb.column.terminal",inlineEdit:"boolean"}]}},methods:{createNewItemCard:function(){this.itemCard=this.itemCardRepository.create(_.api),this.treeNode.item.itemCardId=null},createdComponent:function(){var e=this;return I(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.isLoading=!0,e.itemCardRepository.search(e.itemCardListCriteria,_.api).then((function(t){e.itemCardList=t})),e.treeNodeRepository.search(e.treeNodeChildrenCriteria,_.api).then((function(t){e.children=t,e.total=t.total})),t.next=5,e.treeNodeRepository.get(e.$route.params.id,_.api,e.treeNodeCriteria);case 5:if(e.treeNode=t.sent,!e.treeNode.item.itemCardId){t.next=12;break}return t.next=9,e.itemCardRepository.get(e.treeNode.item.itemCardId,_.api,e.itemCardCriteria);case 9:e.itemCard=t.sent,t.next=13;break;case 12:e.itemCard=e.itemCardRepository.create(_.api);case 13:return t.next=15,e.getProductList();case 15:e.isLoading=!1;case 16:case"end":return t.stop()}}),t)})))()},changeLanguage:function(e){this.currentLanguageId=e,this.createdComponent()},onClickCancel:function(){this.$router.push(this.parentRoute)},onChangeMedia:function(e){e&&this.onSave()},onSave:function(){var e=this;return I(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e.validate()){t.next=2;break}return t.abrupt("return");case 2:if(e.isLoading=!0,t.prev=3,"card"!==e.treeNode.item.type){t.next=9;break}return e.treeNode.item.itemCardId=e.itemCard.id,t.next=9,e.itemCardRepository.save(e.itemCard,_.api);case 9:return t.next=11,e.treeNodeRepository.save(e.treeNode,_.api);case 11:return t.next=13,e.createdComponent();case 13:t.next=19;break;case 15:t.prev=15,t.t0=t.catch(3),e.isLoading=!1,e.createNotificationError({title:e.$tc("eccb.error"),message:t.t0});case 19:case"end":return t.stop()}}),t,null,[[3,15]])})))()},validate:function(){var e=!0;return this.treeNode.stepDescription||(this.createNotificationError({message:"o_0.. Missing required Fields:<br>"+this.$tc("eccb.field.stepDescription")}),e=!1),"card"===this.treeNode.item.type&&(this.itemCard.name||(this.createNotificationError({message:"o_0.. Missing required Fields:<br>"+this.$tc("eccb.field.name")}),e=!1),this.itemCard.internalName||(this.createNotificationError({message:"o_0.. Missing required Fields:<br>"+this.$tc("eccb.field.internalName")}),e=!1)),e},createErrorMessage:function(e){var t="";return e.response.data.errors.forEach((function(e){t+="Error.. o_0: ".concat(e.detail,"\n ").concat(e.source.pointer," \n\n")})),t},changeCard:function(e){var t=this;return I(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:e&&(t.itemCard=t.itemCardList.filter((function(t){return t.id===e}))[0],t.treeNode.item.itemCardId=t.itemCard.id);case 1:case"end":return n.stop()}}),n)})))()},searchCard:function(e){var t=this;return I(regeneratorRuntime.mark((function n(){var i;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:i=new E,""!==e&&i.addFilter(E.contains("internalName",e)),t.itemCardRepository.search(i,_.api).then((function(e){if(t.itemCardList=e,!e.length){t.itemCardList.push({id:"000000",name:"No results found"})}}));case 3:case"end":return n.stop()}}),n)})))()},deleteItemCard:function(e){var t=this;console.log(e.value);var n=e.value;this.itemCardRepository.delete(n,_.api).then((function(){t.createdComponent()})).catch((function(e){t.createNotificationError({title:t.$tc("eccb.error"),message:e})}))},deleteTreeNode:function(e){var t=this;this.children.remove(e.id),this.treeNodeRepository.delete(e.id,_.api).then((function(){t.createNotificationSuccess({title:t.$tc("eccb.save-success.title"),message:t.$tc("eccb.save-success.text")})})).catch((function(e){t.createNotificationError({title:t.$tc("eccb.error"),message:e}),t.createdComponent()}))},setInlineEdit:function(e,t){this.inlineEdit=!0,this.currentInlineEditId=t},getInlineEdit:function(e){return this.inlineEdit&&this.currentInlineEditId===e.id},cancelInlineEdit:function(){this.inlineEdit=!1,this.currentInlineEditId=null},onInlineEdit:function(e){var t=this;return I(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,t.isLoading=!0,n.next=4,t.treeNodeRepository.save(e,_.api);case 4:return t.cancelInlineEdit(),n.next=7,t.createdComponent();case 7:n.next=12;break;case 9:n.prev=9,n.t0=n.catch(0),t.createNotificationError({title:t.$tc("eccb.error"),message:n.t0});case 12:case"end":return n.stop()}}),n,null,[[0,9]])})))()},addChildNode:function(){this.$router.push(this.createChildRoute)},onPageChange:function(e){var t=e.page,n=void 0===t?1:t,i=e.limit,r=void 0===i?10:i;this.page=n,this.limit=r,this.isLoading=!0,this.createdComponent()},getProductList:function(){var e=this;return I(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.productRepository.search(e.productCriteria,_.api);case 2:return n=t.sent,e.products=[],n.forEach((function(t){e.products.push(t)})),e.itemCard&&null!==e.itemCard.productId&&(e.products.filter((function(t){return t.id===e.itemCard.productId})).length||e.products.push(e.itemCard.product)),t.abrupt("return",Promise.resolve());case 7:case"end":return t.stop()}}),t)})))()},searchProduct:function(e){var t=this,n=new E;""!==e&&n.addFilter(E.contains("name",e)),this.productRepository.search(n,_.api).then((function(e){if(t.products=e,!e.length){t.products.push({id:"000000",name:"No results found"})}}))},changeProduct:function(e){this.itemCard.productId=e}}});n("UWul");var $=n("5X1H"),R=n.n($);function L(e,t,n,i,r,a,o){try{var c=e[a](o),s=c.value}catch(e){return void n(e)}c.done?t(s):Promise.resolve(s).then(i,r)}function P(e){return function(){var t=this,n=arguments;return new Promise((function(i,r){var a=e.apply(t,n);function o(e){L(a,i,r,o,c,"next",e)}function c(e){L(a,i,r,o,c,"throw",e)}o(void 0)}))}}var T=Shopware,F=T.Component,q=T.Mixin,M=T.Context,D=Shopware.Data.Criteria;F.register("eccb-item-set-detail",{template:R.a,mixins:[q.getByName("notification")],inject:["repositoryFactory"],shortcuts:{"SYSTEMKEY+S":"onSave","SYSTEMKEY+B":"onClickCancel","SYSTEMKEY+N":"createItem"},data:function(){return{itemSet:null,items:null,isLoading:!0,currentLanguageId:M.api.languageId,page:1,limit:10,total:0}},created:function(){this.createdComponent()},computed:{itemSetRepository:function(){return this.repositoryFactory.create("eccb_item_set")},itemRepository:function(){return this.repositoryFactory.create("eccb_item")},itemCriteria:function(){var e=new D;return e.limit=this.limit,e.setPage(this.page),e.addFilter(D.equals("itemSetId",this.$route.params.id)),e.addSorting(D.sort("position","desc")),e},parentRoute:function(){var e=this.$route.query.treeNodeId;return e?(console.log("treeNodeId"),{name:"eccb.plugin.tree-node.detail",params:{id:e}}):(console.log("no treeNodeId"),{name:"eccb.plugin.item-set.list"})},columns:function(){return[{property:"internalName",dataIndex:"internalName",label:"eccb.itemSet.internalName",inlineEdit:"string",routerLink:"eccb.plugin.item-set.item.detail",primary:!0},{property:"position",label:"eccb.column.position",inlineEdit:"number"},{property:"active",label:"eccb.column.active",inlineEdit:"boolean"},{property:"purchasable",label:"eccb.column.purchasable",inlineEdit:"boolean"},{property:"terminal",label:"eccb.column.terminal",inlineEdit:"boolean"}]}},methods:{createdComponent:function(){var e=this;return P(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,(n=new D).addAssociation("treeNodes"),t.next=5,e.itemSetRepository.get(e.$route.params.id,M.api,n);case 5:return e.itemSet=t.sent,t.next=8,e.itemRepository.search(e.itemCriteria,M.api);case 8:e.items=t.sent,e.total=e.items.total,setTimeout((function(){document.getElementById("sw-field--itemSet-internalName").focus()}),100),t.next=17;break;case 13:t.prev=13,t.t0=t.catch(0),e.isLoading=!1,e.createNotificationError({title:e.$tc("eccb.error"),message:e.createErrorMessage(t.t0)});case 17:e.isLoading=!1;case 18:case"end":return t.stop()}}),t,null,[[0,13]])})))()},changeLanguage:function(e){this.currentLanguageId=e,this.createdComponent()},onSave:function(){var e=this;return P(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e.validate()){t.next=2;break}return t.abrupt("return");case 2:return e.isLoading=!0,t.prev=3,t.next=6,e.itemSetRepository.save(e.itemSet,M.api);case 6:return t.next=8,e.createdComponent();case 8:t.next=14;break;case 10:t.prev=10,t.t0=t.catch(3),e.isLoading=!1,e.createNotificationError({title:e.$tc("eccb.error"),message:e.createErrorMessage(t.t0)});case 14:case"end":return t.stop()}}),t,null,[[3,10]])})))()},createErrorMessage:function(e){var t="";return e.response.data.errors.forEach((function(e){t+="Error.. o_0: ".concat(e.detail,"\n ").concat(e.source.pointer," \n\n")})),t},validate:function(){var e=!0;return this.itemSet.internalName||(this.createNotificationError({message:"o_0.. Missing required Fields:<br>"+this.$tc("eccb.field.internalName")}),e=!1),e},onClickListingButton:function(){this.$router.push({name:"eccb.plugin.item-set.list",query:{treeNodeId:this.$route.query.treeNodeId}})},onInlineEdit:function(e){var t=this;return P(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,t.isLoading=!0,n.next=4,t.itemRepository.save(e,M.api);case 4:return n.next=6,t.createdComponent();case 6:n.next=11;break;case 8:n.prev=8,n.t0=n.catch(0),t.createNotificationError({title:t.$tc("eccb.error"),message:n.t0});case 11:case"end":return n.stop()}}),n,null,[[0,8]])})))()},onPageChange:function(e){var t=e.page,n=void 0===t?1:t,i=e.limit,r=void 0===i?25:i;this.page=n,this.limit=r,this.isLoading=!0,this.createdComponent()},onClickCancel:function(){this.$router.push(this.parentRoute)},removeItem:function(e){var t=this;this.items.remove(e.id),this.itemRepository.delete(e.id,M.api).then((function(){t.createNotificationSuccess({title:t.$tc("eccb.save-success.title"),message:t.$tc("eccb.save-success.text")})})).catch((function(e){t.createNotificationError({title:t.$tc("eccb.error"),message:e}),t.createdComponent()}))},createItem:function(){this.$router.push({name:"eccb.plugin.item-set.item.create",query:{itemSetId:this.itemSet.id}})}}});var A=n("bhB8"),B=n.n(A);function O(e,t,n,i,r,a,o){try{var c=e[a](o),s=c.value}catch(e){return void n(e)}c.done?t(s):Promise.resolve(s).then(i,r)}function j(e){return function(){var t=this,n=arguments;return new Promise((function(i,r){var a=e.apply(t,n);function o(e){O(a,i,r,o,c,"next",e)}function c(e){O(a,i,r,o,c,"throw",e)}o(void 0)}))}}var Y=Shopware,V=Y.Component,U=Y.Mixin,K=Y.Context,H=Shopware.Data.Criteria;V.register("eccb-item-set-list",{template:B.a,mixins:[U.getByName("notification")],inject:["repositoryFactory"],shortcuts:{"SYSTEMKEY+B":"onClickCancel","SYSTEMKEY+N":"createItemSet"},data:function(){return{itemSets:null,isLoading:!0,currentLanguageId:Shopware.Context.api.languageId}},created:function(){this.createdComponent()},computed:{itemSetRepository:function(){return this.repositoryFactory.create("eccb_item_set")},parentRoute:function(){return this.$route.query.treeNodeId?{name:"eccb.plugin.tree-node.detail",params:{id:this.$route.query.treeNodeId}}:{name:"eccb.plugin.index"}},columns:function(){return[{property:"internalName",dataIndex:"internalName",label:"Name",inlineEdit:"string",routerLink:"eccb.plugin.item-set.detail",primary:!0}]}},methods:{createdComponent:function(){var e=this;return j(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e.itemSetRepository.search(new H,K.api);case 3:e.itemSets=t.sent,t.next=10;break;case 6:t.prev=6,t.t0=t.catch(0),e.isLoading=!1,e.createNotificationError({title:e.$tc("eccb.error"),message:e.createErrorMessage(t.t0)});case 10:e.isLoading=!1;case 11:case"end":return t.stop()}}),t,null,[[0,6]])})))()},changeLanguage:function(e){var t=this;return j(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return t.currentLanguageId=e,n.next=3,t.createdComponent();case 3:case"end":return n.stop()}}),n)})))()},createErrorMessage:function(e){var t="";return e.response.data.errors.forEach((function(e){t+="Error.. o_0: ".concat(e.detail,"\n ").concat(e.source.pointer," \n\n")})),t},onClickCancel:function(){this.$router.push(this.parentRoute)},createItemSet:function(){this.$router.push({name:"eccb.plugin.item-set.create"})}}});var G=n("nD8g"),J=n.n(G);function Z(e,t,n,i,r,a,o){try{var c=e[a](o),s=c.value}catch(e){return void n(e)}c.done?t(s):Promise.resolve(s).then(i,r)}var z=Shopware,W=z.Component,Q=z.Context;W.extend("eccb-item-set-item-create","eccb-item-set-item-detail",{template:J.a,methods:{createdComponent:function(){Shopware.Context.api.languageId!==Shopware.Context.api.systemLanguageId&&Shopware.State.commit("context/setApiLanguageId",Shopware.Context.api.languageId),this.stepSet||Shopware.State.getters["context/isSystemDefaultLanguage"]||Shopware.State.commit("context/resetLanguageToDefault"),this.getItem()},getItem:function(){this.item=this.itemRepository.create(Q.api),this.item.itemSetId=this.$route.query.itemSetId,this.item.type="card",setTimeout((function(){document.getElementById("sw-field--itemCard-name").focus()}),100),this.itemCard=this.itemCardRepository.create(Q.api),this.isLoading=!1},onSave:function(){var e,t=this;return(e=regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.validate()){e.next=2;break}return e.abrupt("return");case 2:if(t.isLoading=!0,e.prev=3,"card"!==t.item.type){e.next=8;break}return t.item.itemCardId=t.itemCard.id,e.next=8,t.itemCardRepository.save(t.itemCard,Q.api);case 8:return e.next=10,t.itemRepository.save(t.item,Q.api);case 10:t.createNotificationSuccess({title:t.$tc("eccb.save-success.title"),message:t.$tc("eccb.save-success.text")}),t.$router.push({name:"eccb.plugin.item-set.item.detail",params:{id:t.item.id}}),e.next=18;break;case 14:e.prev=14,e.t0=e.catch(3),t.isLoading=!1,t.createNotificationError({title:t.$tc("eccb.error"),message:e.t0});case 18:case"end":return e.stop()}}),e,null,[[3,14]])})),function(){var t=this,n=arguments;return new Promise((function(i,r){var a=e.apply(t,n);function o(e){Z(a,i,r,o,c,"next",e)}function c(e){Z(a,i,r,o,c,"throw",e)}o(void 0)}))})()}}});n("RghW");function X(e,t,n,i,r,a,o){try{var c=e[a](o),s=c.value}catch(e){return void n(e)}c.done?t(s):Promise.resolve(s).then(i,r)}function ee(e){return function(){var t=this,n=arguments;return new Promise((function(i,r){var a=e.apply(t,n);function o(e){X(a,i,r,o,c,"next",e)}function c(e){X(a,i,r,o,c,"throw",e)}o(void 0)}))}}var te=Shopware,ne=te.Component,ie=te.Context,re=te.Mixin,ae=Shopware.Data.Criteria;ne.register("eccb-item-set-item-detail",{template:J.a,mixins:[re.getByName("notification")],inject:["repositoryFactory"],shortcuts:{"SYSTEMKEY+S":"onSave","SYSTEMKEY+B":"onClickCancel"},data:function(){return{item:null,itemCard:null,isLoading:!0,products:[]}},created:function(){this.createdComponent()},mounted:function(){this.$refs.sidebar.openContent()},computed:{itemRepository:function(){return this.repositoryFactory.create("eccb_item")},itemCardRepository:function(){return this.repositoryFactory.create("eccb_item_card")},itemCriteria:function(){return new ae},itemCardCriteria:function(){var e=new ae;return e.addAssociation("media"),e.addAssociation("product"),e},parentRoute:function(){return this.item.itemSetId?{name:"eccb.plugin.item-set.detail",params:{id:this.item.itemSetId}}:{name:"eccb.plugin.tree-node.detail"}},productRepository:function(){return this.repositoryFactory.create("product")},productOptions:function(){return this.products.map((function(e){return{value:e.id,label:e.name}}))},productCriteria:function(){return new ae}},methods:{createdComponent:function(){var e=this;return ee(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.itemRepository.get(e.$route.params.id,ie.api,e.itemCriteria);case 2:return e.item=t.sent,t.next=5,e.itemCardRepository.get(e.item.itemCardId,ie.api,e.itemCardCriteria);case 5:return e.itemCard=t.sent,t.next=8,e.getProductList();case 8:e.isLoading=!1;case 9:case"end":return t.stop()}}),t)})))()},onSave:function(){var e=this;return ee(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e.validate()){t.next=2;break}return t.abrupt("return");case 2:if(e.isLoading=!0,t.prev=3,"card"!==e.item.type){t.next=9;break}return e.item.itemCardId=e.itemCard.id,t.next=9,e.itemCardRepository.save(e.itemCard,ie.api);case 9:return t.next=11,e.itemRepository.save(e.item,ie.api);case 11:return t.next=13,e.createdComponent();case 13:t.next=19;break;case 15:t.prev=15,t.t0=t.catch(3),e.isLoading=!1,e.createNotificationError({title:e.$tc("eccb.error"),message:t.t0});case 19:case"end":return t.stop()}}),t,null,[[3,15]])})))()},onChangeMedia:function(e){e&&this.onSave()},validate:function(){var e=!0;return this.item.internalName||(this.createNotificationError({message:"o_0.. Missing required Fields:<br>"+this.$tc("eccb.field.name")}),e=!1),e},changeLanguage:function(e){this.currentLanguageId=e,this.createdComponent()},onCardNameInput:function(e){this.item.internalName=e},onClickCancel:function(){this.$router.push(this.parentRoute)},getProductList:function(){var e=this;return ee(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.productRepository.search(e.productCriteria,ie.api);case 2:return n=t.sent,e.products=[],n.forEach((function(t){e.products.push(t)})),e.itemCard&&null!==e.itemCard.productId&&(e.products.filter((function(t){return t.id===e.itemCard.productId})).length||e.products.push(e.itemCard.product)),t.abrupt("return",Promise.resolve());case 7:case"end":return t.stop()}}),t)})))()},searchProduct:function(e){var t=this,n=new ae;""!==e&&n.addFilter(ae.contains("name",e)),this.productRepository.search(n,ie.api).then((function(e){if(t.products=e,!e.length){t.products.push({id:"000000",name:"No results found"})}}))},changeProduct:function(e){this.itemCard.productId=e}}});var oe=n("xdln"),ce=n.n(oe),se=Shopware,de=se.Component,le=se.Context,me=(se.Utils,Shopware.Data.Criteria);de.extend("eccb-media-field","sw-media-field",{template:ce.a,props:{mediaFolderName:{type:String,required:!1}},data:function(){return{mediaFolderId:""}},watch:{mediaId:function(e){this.fetchItem(e),this.$emit("media-id-change",e),this.$emit("eccb-media-id-change",e)}},methods:{createdComponent:function(){this.$super("createdComponent"),this.getDefaultFolderByName()},getDefaultFolderByName:function(){var e=this,t=this.repositoryFactory.create("media_folder"),n=new me,i=this.mediaFolderName?this.mediaFolderName:"Product Media";n.addFilter(me.equals("name",i)),t.search(n,le.api).then((function(t){e.mediaFolderId=t[0].id}))}}});var ue=n("0ARt"),pe=n.n(ue);n("1m6A");function he(e,t,n,i,r,a,o){try{var c=e[a](o),s=c.value}catch(e){return void n(e)}c.done?t(s):Promise.resolve(s).then(i,r)}function fe(e){return function(){var t=this,n=arguments;return new Promise((function(i,r){var a=e.apply(t,n);function o(e){he(a,i,r,o,c,"next",e)}function c(e){he(a,i,r,o,c,"throw",e)}o(void 0)}))}}var ge=Shopware,be=ge.Component,ve=ge.Mixin,we=ge.Context,Se=Shopware.Data.Criteria,ye=Shopware.Utils;ye.debounce,ye.get;be.register("eccb-item-set-list-component",{template:pe.a,mixins:[ve.getByName("notification")],inject:["repositoryFactory"],props:{treeNode:{type:Object,required:!0}},data:function(){return{itemSetOptions:[],joinedTreeNodeItemSetValues:null,selectionLoading:!1,isLoading:!1,inlineEdit:!1,currentInlineEditId:null}},created:function(){this.createdComponent()},computed:{itemSetRepository:function(){return this.repositoryFactory.create("eccb_item_set")},treeNodeRepository:function(){return this.repositoryFactory.create("eccb_tree_node")},treeNodeItemSetRepository:function(){return this.repositoryFactory.create("eccb_tree_node_item_set")},joinedTreeNodeItemSetCriteria:function(){var e=new Se,t=this.$route.params.id;return e.addFilter(Se.equals("treeNodeId",t)),e.addAssociation("itemSet"),e.addAssociation("childNode.item"),e.addSorting(Se.sort("childNode.item.position","desc")),e.limit=500,e},itemSetSelectedValues:function(){return this.joinedTreeNodeItemSetValues?this.joinedTreeNodeItemSetValues.map((function(e){return e.itemSetId})):[]},columns:function(){return[{property:"childNode.stepDescription",label:"eccb.column.stepDescription",inlineEdit:"string"},{property:"itemSet.internalName",label:"eccb.column.itemSet",inlineEdit:"string",primary:!0,routerLink:"eccb.plugin.item-set.detail"},{property:"childNode.item.position",label:"eccb.column.position",inlineEdit:"number"},{property:"childNode.item.active",label:"eccb.column.active",inlineEdit:"boolean"}]}},methods:{createdComponent:function(){var e=this;return fe(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!e.treeNode._isNew){t.next=2;break}return t.abrupt("return");case 2:return t.prev=2,t.next=5,e.getItemSetsOptions();case 5:return e.itemSetOptions=t.sent,t.next=8,e.getJoinedTreeNodeItemSetValues();case 8:if(e.joinedTreeNodeItemSetValues=t.sent,!(e.joinedTreeNodeItemSetValues.length>0)){t.next=12;break}return t.next=12,e.search();case 12:t.next=17;break;case 14:t.prev=14,t.t0=t.catch(2),e.createNotificationError({title:e.$tc("eccb.error"),message:t.t0});case 17:case"end":return t.stop()}}),t,null,[[2,14]])})))()},getItemSetsOptions:function(){var e=new Se;return this.itemSetRepository.search(e,Shopware.Context.api)},getJoinedTreeNodeItemSetValues:function(){return this.treeNodeItemSetRepository.search(this.joinedTreeNodeItemSetCriteria,we.api)},onItemSetAdd:function(e){var t=this;return fe(regeneratorRuntime.mark((function n(){var i;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return t.selectionLoading=!0,(i=t.treeNodeItemSetRepository.create(Shopware.Context.api)).treeNodeId=t.$route.params.id,i.itemSetId=e.id,n.prev=4,n.next=7,t.treeNodeItemSetRepository.save(i,Shopware.Context.api);case 7:return n.next=9,t.getJoinedTreeNodeItemSetValues();case 9:t.joinedTreeNodeItemSetValues=n.sent,t.selectionLoading=!1,n.next=17;break;case 13:n.prev=13,n.t0=n.catch(4),t.selectionLoading=!1,t.createNotificationError({title:t.$tc("eccb.error"),message:n.t0});case 17:case"end":return n.stop()}}),n,null,[[4,13]])})))()},onItemSetRemove:function(e){var t=this;return fe(regeneratorRuntime.mark((function n(){var i;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return console.log(e),t.selectionLoading=!0,i=t.joinedTreeNodeItemSetValues.find((function(t){return t.itemSetId===e.id})),console.log(i),n.prev=4,n.next=7,t.treeNodeItemSetRepository.delete(i.id,Shopware.Context.api);case 7:return n.next=9,t.getJoinedTreeNodeItemSetValues();case 9:t.joinedTreeNodeItemSetValues=n.sent,t.selectionLoading=!1,n.next=17;break;case 13:n.prev=13,n.t0=n.catch(4),t.selectionLoading=!1,t.createNotificationError({title:t.$tc("eccb.error"),message:n.t0});case 17:case"end":return n.stop()}}),n,null,[[4,13]])})))()},onItemSetRemoveFromGrid:function(e){var t=this;return fe(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,t.selectionLoading=!0,n.next=4,t.treeNodeItemSetRepository.delete(e.id,Shopware.Context.api);case 4:return n.next=6,t.getJoinedTreeNodeItemSetValues();case 6:t.joinedTreeNodeItemSetValues=n.sent,t.selectionLoading=!1,n.next=14;break;case 10:n.prev=10,n.t0=n.catch(0),t.selectionLoading=!1,t.createNotificationError({title:t.$tc("eccb.error"),message:n.t0});case 14:case"end":return n.stop()}}),n,null,[[0,10]])})))()},setInlineEdit:function(e,t){this.inlineEdit=!0,this.currentInlineEditId=t},getInlineEdit:function(e){return this.inlineEdit&&this.currentInlineEditId===e.id},onInlineEdit:function(e){var t=this;return fe(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,t.itemSetRepository.save(e.itemSet,we.api);case 3:if(!e.childNode){n.next=6;break}return n.next=6,t.treeNodeRepository.save(e.childNode,we.api);case 6:return n.next=8,t.createdComponent();case 8:t.cancelInlineEdit(),n.next=14;break;case 11:n.prev=11,n.t0=n.catch(0),t.createNotificationError({title:t.$tc("eccb.error"),message:n.t0});case 14:case"end":return n.stop()}}),n,null,[[0,11]])})))()},cancelInlineEdit:function(){this.inlineEdit=!1,this.currentInlineEditId=null},search:function(){var e=arguments,t=this;return fe(regeneratorRuntime.mark((function n(){var i,r,a,o;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return i=e.length>0&&void 0!==e[0]?e[0]:"",r=new Se,""!==i&&r.addFilter(Se.contains("internalName",i)),a=[],t.joinedTreeNodeItemSetValues.forEach((function(e){a.push(e.itemSet.id)})),r.addFilter(Se.not("AND",[Se.equalsAny("id",a)])),n.next=8,t.itemSetRepository.search(r,Shopware.Context.api);case 8:o=n.sent,t.itemSetOptions=[],t.joinedTreeNodeItemSetValues.forEach((function(e){t.itemSetOptions.push(e.itemSet)})),o.forEach((function(e){t.itemSetOptions.push(e)}));case 12:case"end":return n.stop()}}),n)})))()}}}),Shopware.Module.register("eccb-plugin",{type:"core",name:"Candy Bags",title:"eccb.general.mainMenuItemGeneral",description:"eccb.general.descriptionTextModule",color:"#ed1c24",icon:"default-object-lab-flask",snippets:{"de-DE":i,"en-GB":r},routes:{index:{component:"eccb-step-set-list",path:"index"},create:{component:"eccb-step-set-create",path:"create",meta:{parentPath:"eccb.plugin.index"}},detail:{component:"eccb-step-set-detail",path:"detail/:id",meta:{parentPath:"eccb.plugin.index"}},"tree-node.create":{component:"eccb-tree-node-create",path:"tree-node/create",meta:{parentPath:"eccb.plugin.index"}},"tree-node.detail":{component:"eccb-tree-node-detail",path:"tree-node/detail/:id",meta:{parentPath:"eccb.plugin.index"}},"item-set.create":{component:"eccb-item-set-create",path:"item-set/create",meta:{parentPath:"eccb.plugin.index"}},"item-set.detail":{component:"eccb-item-set-detail",path:"item-set/detail/:id",meta:{parentPath:"eccb.plugin.index"}},"item-set.list":{component:"eccb-item-set-list",path:"item-set/list",meta:{parentPath:"eccb.plugin.index"}},"item-set.item.create":{component:"eccb-item-set-item-create",path:"item-set/item/create",meta:{parentPath:"eccb.plugin.item-set.detail"}},"item-set.item.detail":{component:"eccb-item-set-item-detail",path:"item-set/item/detail/:id",meta:{parentPath:"eccb.plugin.item-set.list"}}},navigation:[{id:"eccb-step-set",label:"eccb.general.mainMenuItemGeneral",path:"eccb.plugin.index",icon:"default-object-lab-flask",color:"#ed1c24",position:75},{id:"eccb-item-set-list",label:"eccb.general.mainMenuItemSet",path:"eccb.plugin.item-set.list",parent:"eccb-step-set"},{id:"eccb-config",label:"eccb.settings",path:"sw.extension.config",params:{namespace:"EventCandyCandyBags"},parent:"eccb-step-set"}]});var Ce=n("2itw"),Ie=n.n(Ce);Shopware.Component.override("sw-desktop",{template:Ie.a});var Ne=n("RUJY"),xe=n.n(Ne);Shopware.Component.override("sw-admin-menu-item",{template:xe.a,methods:{isEventCandyCandyBagsPath:function(e){return"eccb.plugin.index"===e}}})},bhB8:function(e,t){e.exports='{% block eccb_item_set_list %}\n    <sw-page class="eccb-item_set-list" ref="page">\n        <template #smart-bar-back>\n            <router-link v-if="$route.query.treeNodeId && $refs.page"\n                         class="smart-bar__back-btn"\n                         :to="parentRoute"\n                         :style="{ \'color\': $refs.page.pageColor }">\n                <sw-icon name="default-arrow-head-left" small></sw-icon>\n                <sw-icon :name="$refs.page.module.icon" v-if="$refs.page.module && $refs.page.module.icon"\n                         small></sw-icon>\n            </router-link>\n        </template>\n        <template #smart-bar-header>\n            <h2>\n                {% block eccb_item_set_list_smart_bar_header_title %}\n                    {{ $tc(\'eccb.itemSet.list-title\') }}\n                {% endblock %}\n            </h2>\n        </template>\n        <template #language-switch>\n            <sw-language-switch :disabled="true" @on-change="changeLanguage"></sw-language-switch>\n        </template>\n\n\n        {% block eccb_item_set_list_smart_bar_actions %}\n            <template #smart-bar-actions>\n                {% block eccb_item_set_list_smart_bar_actions_add %}\n                    <sw-button :routerLink="{ name: \'eccb.plugin.item-set.create\' }" variant="primary">\n                        {{ $tc(\'eccb.itemSet.addItemSet\') }}\n                    </sw-button>\n                {% endblock %}\n            </template>\n        {% endblock %}\n\n        <template #content>\n            {% block eccb_item_set_list_content %}\n                <sw-card-view v-if="itemSets" :large="false">\n                    <sw-card :large="false">\n                        <template #grid>\n                            <sw-entity-listing\n                                    :items="itemSets"\n                                    :repository="itemSetRepository"\n                                    :columns="columns"\n                                    :showSelection="false"\n                                    :fullPage="false"\n                                    detailRoute="eccb.plugin.item-set.detail"\n                            >\n                            </sw-entity-listing>\n                        </template>\n                    </sw-card>\n                </sw-card-view>\n            {% endblock %}\n        </template>\n\n\n    </sw-page>\n\n{% endblock %}'},"lfM/":function(e,t){e.exports='{% block eccb_step_set_list %}\n    <sw-page class="eccb-step-set-list">\n        <template #smart-bar-header>\n            <h2>\n                {% block eccb_step_set_list_smart_bar_header_title %}\n                    {{ $tc(\'eccb.sequence.list-title\') }}\n                {% endblock %}\n            </h2>\n        </template>\n        <template #language-switch>\n            <sw-language-switch @on-change="changeLanguage"></sw-language-switch>\n        </template>\n\n\n        {% block eccb_step_set_list_smart_bar_actions %}\n            <template #smart-bar-actions>\n                {% block eccb_step_set_list_smart_bar_actions_add %}\n                    <sw-button :routerLink="{ name: \'eccb.plugin.create\' }" variant="primary">\n                        {{ $tc(\'eccb.sequence.addSequence\') }}\n                    </sw-button>\n                {% endblock %}\n            </template>\n        {% endblock %}\n\n        <template #content>\n            {% block eccb_step_set_list_content %}\n                <sw-entity-listing\n                        :items="stepSets"\n                        :repository="stepSetRepository"\n                        :columns="columns"\n                        :showSelection="false"\n                        detailRoute="eccb.plugin.detail"\n                >\n                </sw-entity-listing>\n\n            {% endblock %}\n        </template>\n    </sw-page>\n\n{% endblock %}'},n4Ua:function(e,t,n){},nD8g:function(e,t){e.exports='{% block eccb_item_set_item_detail %}\n    <sw-page class="eccb-item-set-item-detail" ref="page">\n        <template #smart-bar-back>\n            <router-link v-if="item && $refs.page"\n                         class="smart-bar__back-btn"\n                         :to="parentRoute"\n                         :style="{ \'color\': $refs.page.pageColor }">\n                <sw-icon name="default-arrow-head-left" small></sw-icon>\n            </router-link>\n        </template>\n\n        <template #smart-bar-header>\n            {# <img v-if="item && !item.active" class="eccb-header-icon" :src="\'eventcandycandybags/static/img/state-1-inactive.svg\' | asset"> #}\n            {# <img v-else class="eccb-header-icon" :src="\'eventcandycandybags/static/img/state-1.svg\' | asset"> #}\n            <h2 style="display: inline;" v-html="item ? item.internalName : \'Item Details\'"></h2>\n        </template>\n\n        <template #language-switch>\n            <sw-language-switch v-if="item"\n                                :disabled="item._isNew"\n                                @on-change="changeLanguage">\n            </sw-language-switch>\n        </template>\n\n        {% block eccb_item_set_item_list_smart_bar_actions %}\n            <template #smart-bar-actions>\n                {% block eccb_item_set_item_detail_smart_bar_actions_save %}\n                    <sw-button variant="primary" @click="onSave" :isLoading="isLoading">\n                        {{ $tc(\'eccb.button.save\') }}\n                    </sw-button>\n                {% endblock %}\n            </template>\n        {% endblock %}\n\n        <template #content>\n            <sw-card-view v-if="item" :large="false">\n                <sw-card :large="false">\n\n                    {# bei card type auf disabled #}\n                    <sw-text-field\n                            :disabled="item.type === \'card\'"\n                            :label="$tc(\'eccb.itemSet.internalName\')"\n                            v-model="item.internalName">\n                    </sw-text-field>\n\n                    {# typ disabled, weil momentan nur 1 typ #}\n                    <sw-select-field\n                            :disabled="true"\n                            v-model="item.type"\n                            :label="$tc(\'eccb.field.type\')">\n                        <option value="card">Card</option>\n                    </sw-select-field>\n\n\n                    <sw-checkbox-field :label="$tc(\'eccb.field.active\')"\n                                       v-model="item.active"></sw-checkbox-field>\n\n                    <sw-checkbox-field :label="$tc(\'eccb.field.purchasable\')"\n                                       v-model="item.purchasable"></sw-checkbox-field>\n\n                    <sw-checkbox-field :label="$tc(\'eccb.field.terminal\')"\n                                       v-model="item.terminal"></sw-checkbox-field>\n\n                </sw-card>\n\n\n                <sw-card v-if="itemCard && item && item.type == \'card\'">\n                    <sw-text-field\n                            @input="onCardNameInput"\n                            :label="$tc(\'eccb.field.name\')"\n                            v-model="itemCard.name">\n                    </sw-text-field>\n\n                    <sw-text-editor\n                            :label="$tc(\'eccb.field.description\')"\n                            v-model="itemCard.description">\n                    </sw-text-editor>\n\n                    <eccb-media-field\n                            v-if="itemCard"\n                            :label="$tc(\'eccb.field.image\')"\n                            v-model="itemCard.mediaId"\n                            :showUploadField="false"\n                            :showControls="false"\n                            @eccb-media-id-change="onChangeMedia"\n                            :mediaFolderName="\'Candy Bags\'"\n                    >\n                    </eccb-media-field>\n\n                    <sw-checkbox-field\n                            v-if="itemCard"\n                            style="display: inline-block; margin-right: 2em"\n                            :label="$tc(\'eccb.itemCard.showPrice\')"\n                            v-model="itemCard.showPrice"></sw-checkbox-field>\n\n                    <router-link v-if="itemCard.product"\n                                 class="eccb-product-link"\n                                 :to="{ name: \'sw.product.detail\', params: { id: itemCard.product.id } }"\n                                 :style="{ \'color\': \'#00A1FF\' }">\n                        <sw-icon name="default-web-link" small></sw-icon>&nbsp;\n                        {{ itemCard.product.name }}\n                    </router-link>\n\n                    <sw-single-select\n                            v-if="products.length"\n                            :options="productOptions"\n                            labelValue="label"\n                            valueProperty="value"\n                            :placeholder="$tc(\'eccb.itemCard.addProduct\')"\n                            :label="$tc(\'eccb.itemCard.product\')"\n                            :value="itemCard.productId"\n                            @change="changeProduct"\n                            @select-expanded="getProductList"\n                            @search="searchProduct"\n                            required\n                    >\n                    </sw-single-select>\n                </sw-card>\n\n            </sw-card-view>\n        </template>\n\n        <template #sidebar>\n            <sw-sidebar>\n                <sw-sidebar-item ref="sidebar" :title="$tc(\'eccb.field.image\')" icon="default-object-image">\n                    <div class="image-container">\n                        <img v-if="itemCard && itemCard.media && itemCard.media.url"\n                             class="image"\n                             :src="itemCard.media.url"/>\n                    </div>\n                </sw-sidebar-item>\n            </sw-sidebar>\n        </template>\n    </sw-page>\n{% endblock %}'},nEqv:function(e,t,n){var i=n("6EYD");"string"==typeof i&&(i=[[e.i,i,""]]),i.locals&&(e.exports=i.locals);(0,n("SZ7m").default)("5b30dae6",i,!0,{})},w4qu:function(e,t,n){},xdln:function(e,t){e.exports='{% block sw_media_field_upload_component %}\n    <sw-upload-listener\n            :uploadTag="uploadTag"\n            autoUpload\n            @media-upload-finish="exposeNewId">\n    </sw-upload-listener>\n    <sw-media-upload-v2\n            v-if="showUploadField"\n            variant="regular"\n            :allowMultiSelect="false"\n            :uploadTag="uploadTag"\n            :disabled="disabled"\n            :defaultFolder="mediaFolderId"\n            :targetFolderId="mediaFolderId">\n    </sw-media-upload-v2>\n{% endblock %}'},yuZn:function(e,t){var n=Shopware,i=n.Component,r=n.Context;i.extend("eccb-step-set-create","eccb-step-set-detail",{methods:{createdComponent:function(){Shopware.Context.api.languageId!==Shopware.Context.api.systemLanguageId&&Shopware.State.commit("context/setApiLanguageId",Shopware.Context.api.languageId),this.stepSet||Shopware.State.getters["context/isSystemDefaultLanguage"]||Shopware.State.commit("context/resetLanguageToDefault"),this.getStepSet()},getStepSet:function(){this.stepSet=this.stepSetRepository.create(r.api),this.isLoading=!1},onClickCancel:function(){this.$router.push({name:"eccb.plugin.index"})},onSave:function(){var e=this;this.validate()&&this.stepSetRepository.save(this.stepSet,r.api).then((function(){e.isLoading=!1,e.createNotificationSuccess({title:e.$tc("eccb.save-success.title"),message:e.$tc("eccb.save-success.text")}),e.$router.push({name:"eccb.plugin.detail",params:{id:e.stepSet.id}})})).catch((function(t){e.isLoading=!1,e.createNotificationError({title:e.$tc("eccb.error"),message:e.createErrorMessage(t)})}))}}})},zSds:function(e,t){e.exports='{% block eccb_step_set_detail %}\n    <sw-page class="eccb-step-set-detail">\n\n        <template #smart-bar-header>\n            <img v-if="stepSet && !stepSet.active" class="eccb-header-icon"\n                 :src="\'eventcandycandybags/static/img/state-1-inactive.svg\' | asset">\n            <img v-else class="eccb-header-icon" :src="\'eventcandycandybags/static/img/state-1.svg\' | asset">\n            <h2 style="display: inline;"\n                v-html="stepSet && stepSet.name ? stepSet.name : $tc(\'eccb.sequence.detail-title\')"></h2>\n        </template>\n\n        <template #language-switch>\n            <sw-language-switch v-if="stepSet"\n                                :disabled="stepSet._isNew"\n                                @on-change="changeLanguage">\n            </sw-language-switch>\n        </template>\n\n        {% block eccb_step_set_list_smart_bar_actions %}\n            <template #smart-bar-actions>\n                {% block eccb_step_set_detail_smart_bar_actions_save %}\n                    <sw-button variant="primary" @click="onSave" :isLoading="isLoading">\n                        {{ $tc(\'eccb.button.save\') }}\n                    </sw-button>\n                {% endblock %}\n\n                {# {% block eccb_step_set_detail_smart_bar_actions_cancel %} #}\n                {# <sw-button :disabled="stepSet && stepSet.isLoading" #}\n                {# @click="onClickCancel"> #}\n                {# {{ $tc(\'eccb.step-set.detail.back\') }} #}\n                {# </sw-button> #}\n                {# {% endblock %} #}\n            </template>\n        {% endblock %}\n\n        <template #content>\n            <sw-card-view v-if="stepSet" :large="false">\n                <sw-card :large="false">\n                    <sw-text-field\n                            :label="$tc(\'eccb.field.name\')"\n                            v-model="stepSet.name">\n                    </sw-text-field>\n\n\n                    <sw-text-editor\n                            type="textarea"\n                            :label="$tc(\'eccb.field.description\')"\n                            v-model="stepSet.description">\n                    </sw-text-editor>\n\n\n                    <eccb-media-field\n                            :label="$tc(\'eccb.field.image\')"\n                            v-model="stepSet.mediaId"\n                            :showUploadField="false"\n                            :showControls="false"\n                            @eccb-media-id-change="onMediaSelect"\n                            :mediaFolderName="mediaFolderName"\n                    >\n                    </eccb-media-field>\n\n                    <eccb-media-field\n                            :label="$tc(\'eccb.sequence.baseImage\')"\n                            v-model="stepSet.selectionBaseImageId"\n                            :showUploadField="false"\n                            :showControls="false"\n                            :mediaFolderName="mediaFolderName"\n                    >\n                    </eccb-media-field>\n\n                    <sw-checkbox-field :label="$tc(\'eccb.field.active\')"\n                                       v-model="stepSet.active"></sw-checkbox-field>\n\n\n                    <sw-field\n                            type="select"\n                            :placeholder="$tc(\'sw-product.priceForm.placeholderTaxRate\')"\n                            validation="required"\n                            :value="stepSet.taxId"\n                            @change="updateCurrentTaxRate"\n                            :label="$tc(\'eccb.sequence.basePrice\')"\n                    >\n                        <option\n                                v-for="tax in taxes"\n                                :key="tax.id"\n                                :value="tax.id"\n                                :selected="stepSet.taxId === tax.id">\n                            {{ tax.name }}\n                        </option>\n                    </sw-field>\n\n                    <sw-price-field\n                            v-if="stepSet && stepSet.price"\n                            :taxRate="stepSet.tax"\n                            :price="stepSet.price"\n                            :currency="defaultCurrency">\n                    </sw-price-field>\n\n                    <sw-number-field\n                            style="max-width: 50%"\n                            v-if="stepSet"\n                            v-model="stepSet.revisitAfter"\n                            :label="$tc(\'eccb.field.revisitAfter\')"\n                            :placeholder="\'15\'"\n                    ></sw-number-field>\n\n                    <sw-text-field\n                            v-if="stepSet"\n                            :label="$tc(\'eccb.field.keywords\')"\n                            :placeholder="$tc(\'eccb.field.keywordsPlaceholder\')"\n                            v-model="stepSet.keywords">\n                    </sw-text-field>\n\n\n                </sw-card>\n\n\n                <sw-card :large="false" v-if="!stepSet._isNew">\n\n                    <template #title>\n                        <h2>\n                            {{ $tc(\'eccb.sequence.steps\') }}\n                        </h2>\n                    </template>\n\n                    <template #toolbar>\n                        <sw-button\n                                v-if="stepSet"\n                                variant="primary"\n                                :routerLink="{name: \'eccb.plugin.tree-node.create\', query: { stepSetId: stepSet.id }}"\n                        >\n                            {{ $tc(\'eccb.sequence.addStep\') }}\n                        </sw-button>\n                    </template>\n\n                    <template #grid>\n                        <eccb-data-grid\n                                v-if="steps && !isLoading"\n                                ref="treeNodeGrid"\n                                :dataSource="steps"\n                                :columns="treeNodeColumns"\n                                @inline-edit-save="onInlineEditTreeNodes"\n                                :allowInlineEdit="true"\n                                :showSelection="false"\n                                :naturalSorting="true"\n                                @is-inline-edit="setInlineEdit"\n                                :isLoading="isLoading"\n                        >\n                            <template #actions="{ item }">\n                                <sw-context-menu-item @click="editTreeNode(item)">\n                                    {{ $tc(\'eccb.button.edit\') }}\n                                </sw-context-menu-item>\n\n                                <sw-context-menu-item variant="danger" @click="deleteTreeNode(item)">\n                                    {{ $tc(\'eccb.button.remove\') }}\n                                </sw-context-menu-item>\n                            </template>\n\n                            <template #column-item.position="{item, column}">\n                                <template v-if="getInlineEdit(item) && column.hasOwnProperty(\'inlineEdit\')">\n                                    <sw-data-grid-inline-edit\n                                            v-if="item.item"\n                                            :column="column"\n                                            :compact="true"\n                                            :value="item.item.position"\n                                            @input="item.item.position = $event">\n                                    </sw-data-grid-inline-edit>\n                                </template>\n                            </template>\n\n                            <template #column-item.active="{item, column}">\n                                <sw-data-grid-column-boolean\n                                        v-if="item.item"\n                                        v-model="item.item.active"\n                                        :isInlineEdit="getInlineEdit(item) && column.hasOwnProperty(\'inlineEdit\')">\n                                </sw-data-grid-column-boolean>\n                            </template>\n                        </eccb-data-grid>\n\n                    </template>\n                </sw-card>\n            </sw-card-view>\n        </template>\n\n        <template #sidebar>\n            <sw-sidebar>\n                <sw-sidebar-item ref="sidebar" :title="$tc(\'eccb.field.image\')" icon="default-object-image">\n                    <div class="image-container">\n                        <img v-if="stepSet && stepSet.media && stepSet.media.url"\n                             class="image"\n                             :src="stepSet.media.url"/>\n                    </div>\n                </sw-sidebar-item>\n            </sw-sidebar>\n        </template>\n    </sw-page>\n{% endblock %}'}});